<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blood Requests - Recipient</title>
    <link rel="stylesheet" href="../asset/CSS/Mreq.css">
    
</head>
<body>

    <header>
        <div class="logo">
           <div><h5>Blood Donation</h5></div>
        </div>
        <nav class="top-nav">
            <a href="donor_search.html">Donor Search</a>
            <a href="blood_request_form.html">New Request</a>
            <a href="#" class="active-page">Track Requests</a>
            <a href="#"> Logout</a>
        </nav>
    </header>

    <main class="container">
        <h1>Track and Manage My Blood Requests</h1>

        <section class="status-tabs">
            <button class="tab-btn active" data-status="Active">
                 Active (3)
            </button>
            <button class="tab-btn" data-status="Fulfilled">
                 Fulfilled (5)
            </button>
            <button class="tab-btn" data-status="Cancelled">
                 Cancelled (1)
            </button>
            <button class="tab-btn" data-status="Expired">
                 Expired (0)
            </button>
        </section>

        <section class="request-list-section card">
            <h2><span id="currentStatusTitle">Active</span> Requests</h2>
            
            <table id="requestTable">
                <thead>
                    <tr>
                        <th>Request ID</th>
                        <th>Blood Group</th>
                        <th>Units</th>
                        <th>Hospital</th>
                        <th>Required Date</th>
                        <th>Urgency</th>
                        <th>Responses</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="requestTableBody">
                    <tr><td colspan="8" class="loading-message">Loading requests...</td></tr>
                </tbody>
            </table>
        </section>
        
        <div id="detailsModal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h3>Request Details & Donor Responses</h3>
                <div id="modalDetails">
                    <p><strong>Request:</strong> <span id="modalReqId"></span> (<span id="modalBloodGroup"></span> - <span id="modalUnits"></span> Units)</p>
                    <p><strong>Status:</strong> <span id="modalStatus"></span></p>
                    <hr>
                    <h4>Donor Responses: <span id="responseCount">0</span></h4>
                    <ul id="responseList">
                        <li>No donors have responded yet.</li>
                    </ul>
                    <button class="action-btn primary fulfill-btn"> Mark as Fulfilled</button>
                </div>
            </div>
        </div>

    </main>

    <script src="../asset/JavaScript/Mreq.js"></script>

</body>
</html>